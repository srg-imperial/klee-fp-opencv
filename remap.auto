#!/bin/sh

. ./Makefile.config

NAME=$1
shift

OUTDIR=remap.auto.out.$NAME
rm -rf $OUTDIR
mkdir $OUTDIR

for algo in n c l ; do
	for fmt in u8 s16 u16 f32 ; do
		id=$algo$fmt
		echo $id
		$KLEE_BUILD_PATH/bin/klee -libc=uclibc -output-source=false -output-istats=false -output-dir=$OUTDIR/klee-out-$id -instrument-simd ./remap.opt.bc -$algo -f $fmt "$@" > $OUTDIR/$id.log 2>&1
	done
done
